<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpretable Galaxy Predictor</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="app-container">
        <header>
            <div class="logo">Galaxy<span>Predictor</span></div>
            <p class="subtitle">Physics-Informed Neural Networks with Explainable Uncertainty</p>
        </header>

        <main class="grid-layout">
            <!-- INPUT PANEL -->
            <section class="panel input-panel">
                <div class="panel-header">
                    <h2>Configuration</h2>
                    <div class="preset-buttons">
                        <button onclick="loadPreset('star_forming')" class="btn-preset"
                            title="Star Forming Galaxy Preset">Star Forming</button>
                        <button onclick="loadPreset('transition')" class="btn-preset"
                            title="Transition Galaxy Preset">Transition</button>
                        <button onclick="loadPreset('quenched')" class="btn-preset"
                            title="Quenched Galaxy Preset">Quenched</button>
                    </div>
                </div>

                <form id="predictForm">
                    <div class="input-group">
                        <label>Photometry (Magnitudes)</label>
                        <div class="grid-2">
                            <div class="field">
                                <label for="u">u-band</label>
                                <input type="number" id="u" step="any" placeholder="20.7468" required>
                            </div>
                            <div class="field">
                                <label for="g">g-band</label>
                                <input type="number" id="g" step="any" placeholder="19.5216" required>
                            </div>
                            <div class="field">
                                <label for="r">r-band</label>
                                <input type="number" id="r" step="any" placeholder="18.8356" required>
                            </div>
                            <div class="field">
                                <label for="i">i-band</label>
                                <input type="number" id="i" step="any" placeholder="18.4295" required>
                            </div>
                            <div class="field">
                                <label for="z">z-band</label>
                                <input type="number" id="z" step="any" placeholder="18.158" required>
                            </div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Cosmological Parameters</label>
                        <div class="field">
                            <label for="redshift">Redshift (z)</label>
                            <input type="number" id="redshift" step="any" placeholder="0.0394" required>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary" id="runBtn">
                        Generate Prediction
                    </button>
                </form>
            </section>

            <!-- RESULTS PANEL -->
            <section class="panel result-panel">
                <div class="loading-overlay hidden" id="loading">
                    <div class="spinner"></div>
                </div>

                <div class="empty-state" id="emptyState">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
                        stroke-linecap="round" stroke-linejoin="round" style="margin-bottom: 1rem; opacity: 0.5;">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 16v-4"></path>
                        <path d="M12 8h.01"></path>
                    </svg>
                    <p>Select a preset or enter data to analyze galaxy properties.</p>
                </div>

                <div class="results-content hidden" id="resultsContent">
                    <!-- Physical Properties -->
                    <div class="result-card">
                        <div class="metric-row">
                            <div class="metric">
                                <span class="metric-label">Stellar Mass</span>
                                <div class="metric-value-group">
                                    <span class="metric-value" id="massVal">--</span>
                                    <span class="metric-unit">log M<sub>☉</sub></span>
                                </div>
                                <span class="metric-uncertainty">± <span id="massErr">--</span></span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Star Formation Rate</span>
                                <div class="metric-value-group">
                                    <span class="metric-value" id="sfrVal">--</span>
                                    <span class="metric-unit">log SFR</span>
                                </div>
                                <span class="metric-uncertainty">± <span id="sfrErr">--</span></span>
                            </div>
                        </div>
                    </div>

                    <!-- Quenching Probability -->
                    <div class="result-card">
                        <div class="card-header">
                            <h3>Quenching Status</h3>
                            <span class="badge" id="quenchingStatus">--</span>
                        </div>

                        <div class="probability-display">
                            <div class="prob-bar-bg">
                                <div class="prob-bar-fill" id="probBar"></div>
                                <div class="prob-marker" id="probMarker"></div>
                            </div>
                            <div class="prob-labels">
                                <span>Active Star Forming</span>
                                <span class="prob-value-text" id="probText">Q = --</span>
                                <span>Quenched</span>
                            </div>
                        </div>

                        <div class="distribution-plot">
                            <label>Posterior Distribution (Model Uncertainty)</label>
                            <div class="histogram" id="histogram">
                                <!-- Bars injected by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Comparison -->
                    <div class="model-comparison-toggle">
                        <details>
                            <summary>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                                Compare with Standard Random Forest
                            </summary>
                            <div class="comparison-table">
                                <div class="comp-row header">
                                    <span>Model Architecture</span>
                                    <span>Log Mass</span>
                                    <span>Log SFR</span>
                                </div>
                                <div class="comp-row">
                                    <span style="color: var(--primary-accent); font-weight: 500;">PINN
                                        (Physics-Informed)</span>
                                    <span id="pinnCompMass">--</span>
                                    <span id="pinnCompSfr">--</span>
                                </div>
                                <div class="comp-row">
                                    <span style="color: var(--text-muted);">Random Forest (Baseline)</span>
                                    <span id="rfCompMass">--</span>
                                    <span id="rfCompSfr">--</span>
                                </div>
                            </div>
                        </details>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="/static/script.js"></script>
</body>

</html>